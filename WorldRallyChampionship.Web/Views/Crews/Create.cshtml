@model WorldRallyChampionship.Web.ViewModels.Crew.CrewFormModel
@{
	ViewData["Title"] = "Create Crew";
}
<h2>Create Crew</h2>
<form asp-action="Create" method="post">
	<div class="row g-3">
		<div class="col-md-4">
			<label class="form-label">Driver</label>
			<select asp-for="DriverId" class="form-select"
					asp-items="@(new SelectList(Model.Drivers, "Id", "Name"))"></select>
			<span asp-validation-for="DriverId" class="text-danger"></span>
		</div>
		<div class="col-md-4">
			<label class="form-label">Co-Driver</label>
			<select asp-for="CoDriverId" class="form-select"
					asp-items="@(new SelectList(Model.Drivers, "Id", "Name"))"></select>
			<span asp-validation-for="CoDriverId" class="text-danger"></span>
		</div>
		<div class="col-md-4">
			<label class="form-label">Team</label>
			<select asp-for="TeamId" class="form-select"
					asp-items="@(new SelectList(Model.Teams, "Id", "Name"))"></select>
			<span asp-validation-for="TeamId" class="text-danger"></span>
		</div>

		<div class="col-md-6">
			<label class="form-label">Car model</label>
			<input asp-for="CarModel" class="form-control" />
			<span asp-validation-for="CarModel" class="text-danger"></span>
		</div>
		<div class="col-md-3">
			<label class="form-label">Car number</label>
			<input asp-for="CarNumber" class="form-control" />
			<span asp-validation-for="CarNumber" class="text-danger"></span>
		</div>
		<div class="col-md-9">
			<label class="form-label">Car image URL</label>
			<input asp-for="CarImageUrl" class="form-control" placeholder="/img/cars/hyundai-i20.jpg" />
			<span asp-validation-for="CarImageUrl" class="text-danger"></span>
		</div>
	</div>
	<div class="mt-3">
		<button type="submit" class="btn btn-primary">Create</button>
		<a asp-action="Index" class="btn btn-secondary">Cancel</a>
	</div>
</form>

@section Scripts {
	<partial name="_ValidationScriptsPartial" />
	<script>
		const d = document.getElementById("DriverId");
		const c = document.getElementById("CoDriverId");
		function guard(){ if(d.value === c.value && d.value) { c.setCustomValidity("Driver и Co-Driver трябва да са различни"); } else { c.setCustomValidity(""); } }
		d.addEventListener("change", guard); c.addEventListener("change", guard);
	</script>
}
